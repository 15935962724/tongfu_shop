!function e(t,n,o){function r(i){if(!n[i]){if(!t[i]){var a=new Error('module not found \''+i+'\'');throw a.code='MODULE_NOT_FOUND',a;}var s=n[i]={exports:{}};t[i][0].call(s.exports,function(e){var n=t[i][1][e];return r(n||e);},s,s.exports,e,t,n,o);}return n[i].exports;}for(var i=0;i<o.length;i++)r(o[i]);return r;}({apis:[function(e,t,n){t.exports=function(e,t){var n=e.startTime||e.config.startTime,o=n;if(!n)try{n=window.performance.timing.responseStart||+new Date,o=+new Date;}catch(e){o=n=+new Date;}var r=function(t,n){n=n||e.config.sample,e.sampling(n)==(e.config.modVal||1)&&(t.sampling=n,e.send(t));};e.count=function(t){try{var n={type:'count',key:'object'==typeof t&&t.key?t.key:t};r(e.extend(n,t));}catch(e){}},e.time=function(e,t){var n,o;try{'object'==typeof e&&e.key&&e.value?(n=e.key,o=e.value):(n=e,o=t),r({type:'time',key:n,value:o});}catch(e){}},e.error=function(e,t,n,o,i,a){var s={type:'jserror'};if(1===arguments.length&&(t=e,e=void 0),t){if(s.category=e||'sys','object'==typeof t&&t.message){var c=t;try{t=c.message,n=n||c.filename,o=o||c.lineno,i=i||c.colno;}catch(e){}}else if('object'==typeof t)try{t=JSON.stringify(t);}catch(e){}try{t=t?t.substring(0,1e3):'';}catch(e){t='';}a=a?a.substring(0,1e3):'',s.msg=t,n&&(s.file=n),o&&(s.line=o),i&&(s.col=i),a&&(s.stack=a),r(s,1);}},e.performance=function(t){r(e.extend({type:'per'},t));},e.sendApi=function(t,o,i,a,s){var c={type:'api',sampling:this.config.sendApi[t]};if('object'==typeof t){try{t.msg=t.msg?t.msg.substring(0,1e3):'';}catch(e){t.msg='';}c.api=t.api,c.issucess=t.issuccess,c.delay='number'==typeof t.delay?parseInt(t.delay,10):new Date-n,c.msg=t.msg||(t.issuccess?'success':'fail'),c.detail=t.detail||'',c.traceId=t.traceId||'',delete(c=e.extend(t,c)).issuccess;}else{try{s=s?s.substring(0,1e3):'';}catch(e){s='';}c=e.extend({api:t,issucess:o,delay:'number'==typeof i?parseInt(i,10):new Date-n,msg:a||(o?'success':'fail'),detail:s||''},c);}void 0!==c.delay&&void 0!==c.issucess&&r(c,c.issucess?c.sampling:1);};var i=function(){for(var t,n={type:'speed'},o=0,i=e.speed.points.length;o<i;o++)(t=e.speed.points[o])&&(n['s'+o]=t,e.speed.points[o]=null);r(n);};e.speed=function(t,r,a){var s;'string'==typeof t&&(t=parseInt(t.slice(1),10)),'number'==typeof t&&((s=e.speed.points||new Array(11))[t]='number'==typeof r?r>864e5?r-n:r:new Date-n,s[t]<0&&(s[t]=new Date-o),e.speed.points=s),clearTimeout(e.speed.timer),a?i():e.speed.timer=setTimeout(i,3e3);},e.log=function(e,t){r({type:'log',msg:e},t);};};},{}],browserPerformance:[function(e,t,n){t.exports=function(e,t,n){var o={},r=t.onerror;({init:function(){this.sendPerformance(),this.bind(),/trackerdebug\=1/.test(location.search)&&(e.config.sample=1,e.config.modVal=1,e.debug=!0);},bind:function(){e.on(t,'beforeunload',function(){e.clear(),e.speed.points&&e.speed(null,null,!0);},!0),t.onerror=function(t,n,o,i,a){r&&r(t,n,o,i,a);var s=a&&a.stack;n?e.error('sys',t,n,o,i,s):e.error(t);};},analyzeTiming:function(){var e={t_request:['responseStart','requestStart'],t_response:['responseEnd','responseStart'],t_dns:['domainLookupEnd','domainLookupStart'],t_tcp:['connectEnd','connectStart'],t_network:['responseStart','fetchStart'],t_dom:['domContentLoadedEventStart','responseStart'],t_full:['loadEventStart','responseStart']};try{var t=performance.timing;for(var n in e){var r=t[e[n][1]],i=t[e[n][0]];if(r&&i){var a=i-r;a>=0&&a<864e5&&(o[n]=a);}}}catch(e){}return o;},sendPerformance:function(){var n=this;'complete'===document.readyState?e.performance(n.analyzeTiming()):e.on(t,'load',function(){e.performance(n.analyzeTiming());},!0);}}).init();};},{}],confBrowser:[function(e,t,n){t.exports={sendRequest:function(e){var t=window,n='jsFeImage_'+(+new Date+Math.floor(1e3*Math.random())),o=t[n]=new Image;o.onload=o.onerror=function(){t[n]=null;},o.src=e,o=null;},getCookie:function(){return document.cookie;}};},{}],core:[function(e,t,n){t.exports=function(e,t,n){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1;});var o,r,i={},a=0,s='//log-server.sparta.html5.qq.com/log.gif?',c=location.hostname;-1!==['miying.qq.com','aiyixue.qq.com'].indexOf(c)&&(s='//log.wecity.qq.com/log.gif?');var u={imgUrl:s,sample:1,modVal:1,sendApi:{},delayOfReady:null},f=n.sendRequest,p=function(){for(var t,n;t=l.dequeue();){var i=e.config.custom||{};t=l.extend(i,t),n=l.extend({uid:o,userNick:e.getNick(),hospital:e.getHospital(),_t:~new Date+(a++).toString(),appId:e.config.appId||'',pageId:e.getPageId(),pageUrl:window.location.href},t),e.debug&&'object'==typeof window&&window.console&&console.log(n),f.call(e,u.imgUrl+l.query.stringify(n));}r=null;},d=function(e){e&&r&&(clearTimeout(r),p()),r||(r=setTimeout(p,1e3));},l={_key:'aitrakerKey',ver:'0.0.1',requestQueue:e.requestQueue||[],getCookie:function(e){var t,o,r='';if(!i[e]){t=new RegExp(e+'=([^;]+)');try{r=n.getCookie(this);}catch(e){}(o=t.exec(r))&&(i[e]=o[1]);}return i[e];},setCookie:function(e,t,n,o,r){var i=e+'='+t;o&&(i+='; domain='+o),r&&(i+='; path='+r),n&&(i+='; expires='+n),document.cookie=i;},extend:function(e){for(var t,n=Array.prototype.slice.call(arguments,1),o=0,r=n.length;o<r;o++)for(var i in t=n[o])t.hasOwnProperty(i)&&(e[i]=t[i]);return e;},guid:function(){var e=this.getCookie('ai_user_open_id')||this.getCookie('ai_user_uid');return e||'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(e){var t=16*Math.random()|0;return('x'==e?t:3&t|8).toString(16);});},send:function(t){t&&!e.config.disabled&&this.queue(t);},query:{stringify:function(e){var t=[],n='';try{for(var o in e)if(e.hasOwnProperty(o)&&void 0!==e[o]){var r=encodeURIComponent(e[o]);t.push(o+'='+r);}t.length>0&&(n=t.join('&'));}catch(e){}return n;},parse:function(e){var t,n=e.split('&'),o={};try{for(var r=0,i=n.length;r<i;r++)o[(t=n[r].split('='))[0]]=decodeURIComponent(t[1]);}catch(e){}return o;}},on:function(e,t,n,o){e.addEventListener?e.addEventListener(t,o?function(){e.removeEventListener(t,n,!1),n();}:n,!1):e.attachEvent&&e.attachEvent('on'+t,function(){o&&e.detachEvent('on'+t,arguments.callee),n();});},getNick:function(){var t='';try{e.config.nick?t=e.config.nick:(t=this.getCookie('ai_user_name')||this.getCookie('study'),t=decodeURIComponent(t));}catch(e){}return t;},getHospital:function(){var e='';try{e=this.getCookie('ai_user_hospital_id'),e=decodeURIComponent(e);}catch(e){}return e;},getPageId:function(){var t='';try{if(e.config.pageId)t=e.config.pageId;else{var n,o=location.href,r=location.pathname,i=o.split('#/')[1],a=!!i;if('/'==r)n='index';else{for(var s=[],c=r.split('/'),u=0;u<c.length;u++){var f=c[u];if(f){!/[0-9]/g.exec(f)&&f.length<16&&s.push(f);}}n=s[s.length-1];}n=a?n+'#'+i.replace(/[0-9]/g,'').replace(/\//g,'').split('?')[0]:n,t=decodeURIComponent(n);}}catch(e){}return t;},setConfig:function(e){if(e&&'object'!=typeof e)throw'args of tracker.setConfig is not object';return e&&e.user&&'function'==typeof e.user.getUserInfo&&e.user.getUserInfo(function(e){try{var t=JSON.parse(e);l.extend(u,{nick:t.info&&t.info.nick});}catch(e){}}),l.extend(u,e);},ready:function(){var t=function(){e._ready=!0,d();};e.config.delayOfReady?setTimeout(function(){t();},e.config.delayOfReady):t();},queue:function(e){var t,n=this.requestQueue;if('jserror'===e.type){if(n.length&&(t=n[n.length-1],e.msg===t.msg))return void t.times++;e.times;}n.push(e),this._ready&&('jserror'===e.type?d(!1):p());},dequeue:function(){return this.requestQueue.shift();},clear:function(){d(!0);}};return l.uid=o=l.guid(),l.config=l.setConfig(e.config),l.extend(e,l),t.__TRACKER=e,e;};},{}],initialize:[function(e,t,n){!function(t){var n=e('./conf-browser'),o=t.__TRACKER||{};o.env='browser',e('./core')(o,t,n);'complete'===document.readyState?o.ready():o.on(t,'load',function(){o.ready();},!0),e('./sampling')(o),e('./apis')(o),e('./browser-performance')(o,t,n);}(window),t.exports=window.__TRACKER;},{'./apis':'apis','./browser-performance':'browserPerformance','./conf-browser':'confBrowser','./core':'core','./sampling':'sampling'}],sampling:[function(e,t,n){t.exports=function(e){var t={};e.sampling=function(n){e.uid;return 1==n?1:'number'==typeof t[n]?t[n]:(t[n]=Math.floor(Math.random()*n),t[n]);};};},{}]},{},['initialize']);